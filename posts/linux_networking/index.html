<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Linux networking | Erick's Code</title>
<meta name=keywords content><meta name=description content="linux_networking
This is a recopilation of commands and its executiong based on the book THE GORILLA GUIDE TO LINUX NETWORKING 101
Chapter 2
‚ùØ ssh cumulus@192.168.1.107
cumulus@192.168.1.107's password: ********
Welcome to Cumulus VX (TM)
Cumulus VX (TM) is a community supported virtual 
appliance designed for experiencing, testing, and 
prototyping Cumulus Networks' latest technology.
For any questions or technical support, visit our 
community site at: http://community.cumulusnetworks.com
The registered trademark Linux ¬Æ is used pursuant to a 
sublicense from LMI, the exclusive licensee of 
‚ùØ uname -a
Linux e-pc 5.15.0-124-generic #134~20.04.1-Ubuntu SMP Tue Oct 1 15:27:33 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux
Show the type of operating system"><meta name=author content="3rickDJ"><link rel=canonical href=https://erickdjm.xyz/posts/linux_networking/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://erickdjm.xyz/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://erickdjm.xyz/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://erickdjm.xyz/favicon-32x32.png><link rel=apple-touch-icon href=https://erickdjm.xyz/apple-touch-icon.png><link rel=mask-icon href=https://erickdjm.xyz/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://erickdjm.xyz/posts/linux_networking/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Linux networking"><meta property="og:description" content="linux_networking
This is a recopilation of commands and its executiong based on the book THE GORILLA GUIDE TO LINUX NETWORKING 101
Chapter 2
‚ùØ ssh cumulus@192.168.1.107
cumulus@192.168.1.107's password: ********
Welcome to Cumulus VX (TM)
Cumulus VX (TM) is a community supported virtual 
appliance designed for experiencing, testing, and 
prototyping Cumulus Networks' latest technology.
For any questions or technical support, visit our 
community site at: http://community.cumulusnetworks.com
The registered trademark Linux ¬Æ is used pursuant to a 
sublicense from LMI, the exclusive licensee of 
‚ùØ uname -a
Linux e-pc 5.15.0-124-generic #134~20.04.1-Ubuntu SMP Tue Oct 1 15:27:33 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux
Show the type of operating system"><meta property="og:type" content="article"><meta property="og:url" content="https://erickdjm.xyz/posts/linux_networking/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-10-29T09:20:42-06:00"><meta property="article:modified_time" content="2024-10-29T09:20:42-06:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Linux networking"><meta name=twitter:description content="linux_networking
This is a recopilation of commands and its executiong based on the book THE GORILLA GUIDE TO LINUX NETWORKING 101
Chapter 2
‚ùØ ssh cumulus@192.168.1.107
cumulus@192.168.1.107's password: ********
Welcome to Cumulus VX (TM)
Cumulus VX (TM) is a community supported virtual 
appliance designed for experiencing, testing, and 
prototyping Cumulus Networks' latest technology.
For any questions or technical support, visit our 
community site at: http://community.cumulusnetworks.com
The registered trademark Linux ¬Æ is used pursuant to a 
sublicense from LMI, the exclusive licensee of 
‚ùØ uname -a
Linux e-pc 5.15.0-124-generic #134~20.04.1-Ubuntu SMP Tue Oct 1 15:27:33 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux
Show the type of operating system"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://erickdjm.xyz/posts/"},{"@type":"ListItem","position":2,"name":"Linux networking","item":"https://erickdjm.xyz/posts/linux_networking/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Linux networking","name":"Linux networking","description":"linux_networking This is a recopilation of commands and its executiong based on the book THE GORILLA GUIDE TO LINUX NETWORKING 101\nChapter 2 ‚ùØ ssh cumulus@192.168.1.107 cumulus@192.168.1.107\u0026#39;s password: ******** Welcome to Cumulus VX (TM) Cumulus VX (TM) is a community supported virtual appliance designed for experiencing, testing, and prototyping Cumulus Networks\u0026#39; latest technology. For any questions or technical support, visit our community site at: http://community.cumulusnetworks.com The registered trademark Linux ¬Æ is used pursuant to a sublicense from LMI, the exclusive licensee of ‚ùØ uname -a Linux e-pc 5.15.0-124-generic #134~20.04.1-Ubuntu SMP Tue Oct 1 15:27:33 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux Show the type of operating system\n","keywords":[""],"articleBody":"linux_networking This is a recopilation of commands and its executiong based on the book THE GORILLA GUIDE TO LINUX NETWORKING 101\nChapter 2 ‚ùØ ssh cumulus@192.168.1.107 cumulus@192.168.1.107's password: ******** Welcome to Cumulus VX (TM) Cumulus VX (TM) is a community supported virtual appliance designed for experiencing, testing, and prototyping Cumulus Networks' latest technology. For any questions or technical support, visit our community site at: http://community.cumulusnetworks.com The registered trademark Linux ¬Æ is used pursuant to a sublicense from LMI, the exclusive licensee of ‚ùØ uname -a Linux e-pc 5.15.0-124-generic #134~20.04.1-Ubuntu SMP Tue Oct 1 15:27:33 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux Show the type of operating system\n‚ùØ uname -a Linux e-pc 5.15.0-124-generic #134~20.04.1-Ubuntu SMP Tue Oct 1 15:27:33 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux Show host info and other data\n‚ùØ hostnamectl Static hostname: e-pc Icon name: computer-laptop Chassis: laptop üíª Machine ID: 34a383e3a4c9492584d9b5fee7932a04 Boot ID: be0e8ac233fa4734b7721b398d184026 Operating System: Ubuntu 20.04.6 LTS OS Support End: - OS Support Expired: 54y 9month 4w Kernel: Linux 5.15.0-124-generic Architecture: x86-64 Print working directory\n‚ùØ pwd /home/erick List files that are present in the folder\n‚ùØ ls '2022-12-19 15-36-29.mkv' '2023-03-06 14-03-44.mkv' '2023-03-23 14-05-14.mkv' '2024-04-15 14-35-45.mkv' binaries_installs/ Downloads/ proyects/ '2022-12-20 15-34-27.mkv' '2023-03-07 14-01-59.mkv' '2023-04-03 14-03-15.mkv' '2024-04-15 14-38-27.mkv' blog/ examenTecuan/ Public/ '2023-01-02 18-39-41.mkv' '2023-03-07 16-01-11.mkv' '2023-04-19 17-37-25.mkv' '2024-04-15 14-39-07.mkv' CLionProjects/ ExpanDrive/ SmartBear/ '2023-02-13 14-25-11.mkv' '2023-03-07 16-08-41.mkv' '2023-11-01 22-27-37.mkv' '2024-04-15 14-43-40.mp4' code/ Firefox_wallpaper.png snap/ '2023-02-14 14-23-23.mkv' '2023-03-07 16-10-51.mkv' '2023-11-07 09-52-49.mkv' '2024-04-15 14-44-26.mp4' conf_vim.md geb_scrip.groovy Templates/ '2023-02-14 14-34-04.mkv' '2023-03-07 16-11-40.mkv' '2023-11-08 09-45-05.mkv' '2024-04-20 06-36-22.mp4' cultivos.mp4 IdeaProjects/ tmp/ '2023-02-16 14-09-09.mkv' '2023-03-07 16-14-50.mkv' '2023-11-17 12-06-38.mkv' '2024-04-20 06-37-49.mp4' cultivos.osp IdeaSnapshots/ uni/ '2023-02-20 13-59-04.mkv' '2023-03-07 16-14-52.mkv' '2023-11-17 18-06-01.mkv' '2024-04-30 12-40-12.mp4' cumple logs/ Videos/ '2023-02-27 14-00-50.mkv' '2023-03-07 16-15-57.mkv' '2023-11-21 13-55-35.mkv' '2024-05-08 10-56-58.mp4' default-soapui-workspace.xml Music/ 'VirtualBox VMs'/ '2023-02-28 14-02-55.mkv' '2023-03-13 14-03-40.mkv' '2024-04-15 14-33-51.mkv' '2024-06-03 17-33-55.mp4' Desktop/ NetBeansProjects/ vite_grep.log '2023-03-02 14-06-31.mkv' '2023-03-22 14-00-11.mkv' '2024-04-15 14-35-34.mkv' '2024-06-06 09-58-58.mp4' Documents/ Pictures/ zblockChain/ Change directory\n‚ùØ cd /home/erick/.config/ Remove files\n‚ùØ rm aFile Make and remove folders\n‚ùØ mkdir folder ‚ùØ rmdir emptyFolder Executing programs Print path variable\n‚ùØ echo $PATH /home/linuxbrew/.linuxbrew/bin /home/linuxbrew/.linuxbrew/sbin /home/erick/.asdf/shims /home/erick/.asdf/bin /home/erick/uni/webServices/pomm/apache-maven-3.9.9/bin /home/linuxbrew/.linuxbrew/opt/postgresql@11/bin /home/erick/.foundry/bin /home/erick/.sdkman/candidates/java/current/bin /home/erick/.sdkman/candidates/groovy/current/bin /home/erick/.sdkman/candidates/gradle/current/bin /home/erick/.cargo/bin /home/erick/.local/bin /usr/local/sbin /usr/local/bin /usr/sbin /usr/bin /sbin /bin /usr/games /usr/local/games /snap/bin List installed packages\n‚ùØ apt list --installed Listing... accountsservice/focal-updates,focal-security,now 0.6.55-0ubuntu12~20.04.7 amd64 [installed,automatic] acl/focal,now 2.2.53-6 amd64 [installed,automatic] acpi-support/focal,now 0.143 amd64 [installed] acpid/focal,now 1:2.0.32-1ubuntu1 amd64 [installed,automatic] adduser/focal,focal,now 3.118ubuntu2 all [installed,automatic] adwaita-icon-theme-full/focal-updates,focal-updates,now 3.36.1-2ubuntu0.20.04.2 all [installed,automatic] . . . Pipin, direct the outpu of a command to another command\n‚ùØ ls -al | less Installing appplications How do I install applications\n‚ùØ sudo apt update ‚ùØ sudo apt install package_to_install Verify installation\n‚ùØ apt show installed_package Getting help Getting help\n‚ùØ man ls LS(1) User Commands LS(1) NAME ls - list directory contents SYNOPSIS ls [OPTION]... [FILE]... DESCRIPTION List information about the FILEs (the current directory by default). Sort entries alphabetically if none of -cftuvSUX nor --sort is specified. Mandatory arguments to long options are mandatory for short options too. -a, --all do not ignore entries starting with . Linux proceses List running proceses\n‚ùØ ps -ef UID PID PPID C STIME TTY TIME CMD root 1 0 0 18:19 ? 00:00:01 /sbin/init splash root 2 0 0 18:19 ? 00:00:00 [kthreadd] root 3 2 0 18:19 ? 00:00:00 [rcu_gp] root 4 2 0 18:19 ? 00:00:00 [rcu_par_gp] root 5 2 0 18:19 ? 00:00:00 [slub_flushwq] root 6 2 0 18:19 ? 00:00:00 [netns] root 8 2 0 18:19 ? 00:00:00 [kworker/0:0H-events_highpri] Start, stop, or check status of services.\n‚ùØ systemctl status rabbitmq-server ‚óè rabbitmq-server.service - RabbitMQ broker Loaded: loaded (8;;file://e-pc/lib/systemd/system/rabbitmq-server.service^G/lib/systemd/system/rabbitmq-server.service8;;^G; enabled; preset: enabled) Active: active (running) since Wed 2024-10-30 00:20:05 UTC; 46min ago Main PID: 1017 (beam.smp) Tasks: 39 (limit: 18697) Memory: 164.5M CGroup: /system.slice/rabbitmq-server.service ‚îú‚îÄ1017 /usr/lib/erlang/erts-14.2.4/bin/beam.smp -W w -MBas ageffcbf -MHas ageffcbf -MBlmbcs 512 -MHlmbcs 512 -MMmcs 30 -pc unicode -P 1048576 -t 5000000 -stbt db -zdbbl 128000 -s\u003e ‚îú‚îÄ1060 erl_child_setup 32768 ‚îú‚îÄ1454 sh -s disksup ‚îú‚îÄ1460 /usr/lib/erlang/lib/os_mon-2.9.1/priv/bin/memsup ‚îú‚îÄ1461 /usr/lib/erlang/lib/os_mon-2.9.1/priv/bin/cpu_sup ‚îú‚îÄ1496 /usr/lib/erlang/erts-14.2.4/bin/inet_gethost 4 ‚îú‚îÄ1497 /usr/lib/erlang/erts-14.2.4/bin/inet_gethost 4 ‚îî‚îÄ1509 /bin/sh -s rabbit_disk_monitor Oct 30 00:20:03 e-pc rabbitmq-server[1017]: Doc guides: https://www.rabbitmq.com/docs Oct 30 00:20:03 e-pc rabbitmq-server[1017]: Support: https://www.rabbitmq.com/docs/contact Oct 30 00:20:03 e-pc rabbitmq-server[1017]: Tutorials: https://www.rabbitmq.com/tutorials . . . Linux log files View and parse log files Show contents of a file\n‚ùØ cat CNAME erickdjm.xyz View a file with pagination and scrolling\n‚ùØ less CNAME Search for a string in a file\n‚ùØ grep PATTERN [FILE] See the first lines (head end) of a text file\n‚ùØ head View the last lines (tail end ) of a text file. A common use case for tail is to wwatch the status of a log fie in real time with the ‚Äúf‚Äù flag like:\n‚ùØ tail -f /var/log/syslog Users and super users User with id 1000, and I am the user erick\n‚ùØ id uid=1000(erick) gid=1000(erick) groups=1000(erick),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),120(lpadmin),132(lxd),133(sambashare),135(docker),136(wireshark),137(vboxusers) ‚ùØ whoami erick ‚ùØ sudo id [sudo] password for erick: uid=0(root) gid=0(root) groups=0(root) ‚ùØ sudo whoami root Files and permissions ‚ùØ ls -l total 36 drwxrwxr-x 2 erick erick 4096 oct 28 19:20 archetypes/ -rw-rw-r-- 1 erick erick 13 oct 28 19:20 CNAME Chapter 3 Understanding Linux Network Interfaces Loopback. The loopback (lo) interface will have an IP address of 127.0.0.1, which represents the host itself\nEthernet. The ethernet 0 (eth0) interface is typically the connection to the local network.\nConfigure network interfaces/devices/links\n‚ùØ ip link 1: lo: mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 2: wlp0s20f3: mtu 1500 qdisc noqueue state UP mode DORMANT group default qlen 1000 link/ether c8:58:c0:c1:86:30 brd ff:ff:ff:ff:ff:ff 3: docker0: mtu 1500 qdisc noqueue state DOWN mode DEFAULT group default link/ether 02:42:9d:02:3e:64 brd ff:ff:ff:ff:ff:ff ip link set [dev] { up | down } ip link set lo mtu 1500\nMAC Addresses Media access control address is the unique identifier assigned to a network interface at layer 2 ‚Äì the Data Link Layer ‚Äì of the OSI Model.\nIP Addressing They are unique on the same network, every device has at least one, adn addresses typically fall somewhere between 1.1.1.1 and 255.255.255.255\n‚ùØ ip addr 1: lo: mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: wlp0s20f3: mtu 1500 qdisc noqueue state UP group default qlen 1000 link/ether c8:58:c0:c1:86:30 brd ff:ff:ff:ff:ff:ff inet 192.168.1.101/24 brd 192.168.1.255 scope global dynamic noprefixroute wlp0s20f3 valid_lft 81572sec preferred_lft 81572sec inet6 2806:10a6:13:511b:e122:aa52:72c7:9797/64 scope global temporary dynamic valid_lft 599973sec preferred_lft 81052sec inet6 2806:10a6:13:511b:549a:f3d5:b811:cde1/64 scope global dynamic mngtmpaddr noprefixroute valid_lft 2591975sec preferred_lft 2591975sec inet6 fe80::3713:2ee:2680:726d/64 scope link noprefixroute valid_lft forever preferred_lft forever 3: docker0: mtu 1500 qdisc noqueue state DOWN group default link/ether 02:42:9d:02:3e:64 brd ff:ff:ff:ff:ff:ff inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0 valid_lft forever preferred_lft forever Sends out an Internet Control Message Protocol packet across the network and notifies whether the irs a response. If a host is up and able to communicate on the network an ICMP response will be returned.\n‚ùØ ping -c5 192.168.192.196 PING 192.168.192.196 (192.168.192.196) 56(84) bytes of data. Another common Linux network troubleshooting toolis traceroute. Probes the network between the local system and a destination, gathering information about each IP router in the path. Is useful when you think there may be a network issue.\n‚ùØ traceroute erickdjm.xyz traceroute to erickdjm.xyz (185.199.108.153), 30 hops max, 60 byte packets 1 _gateway (192.168.1.254) 5.209 ms 5.144 ms 5.117 ms 2 dsl-servicio-l200.uninet.net.mx (200.38.193.226) 5.552 ms 5.526 ms 5.508 ms 3 172.16.1.1 (172.16.1.1) 5.487 ms * * 4 bb-la-grand-12-ae44_0.uninet.net.mx (189.246.23.17) 45.113 ms 45.096 ms 45.080 ms DHCP Dynamic host configuration protocol is commonly used for client systems or devices that don‚Äôt experience any side effects from a periodically changing IP address. On server systems, administrators either manually configure static IP addresses, or they create what are know as static DHCP reservations that are tied to the MAC address of the network adapter.\nHere‚Äôs how the typical DHCP process works:\nWhen a computer starts up, it sends a DHCP request out on the network. Assuming a DHCP server is present, a DHCP server responds with the IP address configuration for that device. That IP address is marked as reserved so that it‚Äôs not accidentally assigned to some other device. DNS Computers that connect to each other using TCP/IP talk with each other using IP addresses. Domain name system (DNS) is used to map IP addresses to names.\nPerfomrs verbose DNS lookups and is great for toubleshooting DNS issues.\n‚ùØ dig erickdjm.xyz ; \u003c\u003c\u003e\u003e DiG 9.18.28-0ubuntu0.20.04.1-Ubuntu \u003c\u003c\u003e\u003e erickdjm.xyz ;; global options: +cmd ;; Got answer: ;; -\u003e\u003eHEADER\u003c\u003c- opcode: QUERY, status: NOERROR, id: 43318 ;; flags: qr rd ra; QUERY: 1, ANSWER: 4, AUTHORITY: 0, ADDITIONAL: 1 ;; OPT PSEUDOSECTION: ; EDNS: version: 0, flags:; udp: 65494 ;; QUESTION SECTION: ;erickdjm.xyz. IN A ;; ANSWER SECTION: erickdjm.xyz. 1799 IN A 185.199.111.153 erickdjm.xyz. 1799 IN A 185.199.110.153 erickdjm.xyz. 1799 IN A 185.199.109.153 erickdjm.xyz. 1799 IN A 185.199.108.153 ;; Query time: 35 msec ;; SERVER: 127.0.0.53#53(127.0.0.53) (UDP) ;; WHEN: Tue Oct 29 20:14:05 CST 2024 ;; MSG SIZE rcvd: 105 Enumeraates name service switch files, specifically for host entries.\n‚ùØ getent ahosts 127.0.0.1 localhost 127.0.1.1 e-pc 127.0.0.1 ip6-localhost ip6-loopback 127.0.0.1 kubernetes.docker.internal The name server lookup, or nslookup, performs variety of different DNS server lookups: mail server, reverse lookups.\n‚ùØ nslookup \u003e erickdjm.xyz Server: 127.0.0.53 Address: 127.0.0.53#53 Non-authoritative answer: Name: erickdjm.xyz Address: 185.199.109.153 Name: erickdjm.xyz Address: 185.199.110.153 Name: erickdjm.xyz Address: 185.199.108.153 Name: erickdjm.xyz Address: 185.199.111.153 Show what active processes are that have the network interface open.\n‚ùØ netstat Active Internet connections (w/o servers) Proto Recv-Q Send-Q Local Address Foreign Address State tcp 0 0 localhost:xtel localhost:40626 ESTABLISHED tcp 0 0 localhost:xtel localhost:34374 ESTABLISHED tcp 0 0 localhost:40642 localhost:xtel ESTABLISHED tcp 0 0 e-pc:51974 13.89.179.13:https ESTABLISHED tcp 0 0 localhost:34374 localhost:xtel ESTABLISHED tcp 0 0 localhost:40288 localhost:epmd ESTABLISHED tcp 0 0 e-pc:41384 static.73.91.90.1:https ESTABLISHED Chapter 4 Bridging First we are creating a brife named br0 The two ip link set commands add the two Ethernet onterfaces, eth0 and eth1, to the new bridge resulting in a connection between these two interfaces.\n‚ùØ sudo ip link add br0 type bridge ‚ùØ sudo ip link add eth0 master br0 ‚ùØ sudo ip link add eth1 master br0 Show current forwarding database management.\n‚ùØ sudo bridge fdb show [sudo] password for david: 01:00:5e:00:00:01 dev eth0 self permanent 33:33:00:00:00:01 dev eth0 self permanent 33:33:ff:d0:e8:7e dev eth0 self permanent 01:00:5e:00:00:fb dev eth0 self permanent 33:33:00:00:00:fb dev eth0 self permanen Neighbor Table When an IP node wants to communicate with a system in the same layer 2 domain, it looks in its neighbor table, or ARP table, to determine how to construct the Ethernet frame. If the desired destination IP address is not in the neighbor table, the node issues an ARP request, which is broadcast to everyone in the layer 2 domain, that asks, ‚ÄúPlease tell me the MAC address for the node with IP address X.X.X.X.‚Äù Assuming the target device is available, the node with that IP address will respond. In Linux, you view (and manipulate) the Neighbor table using the ip neighbor show\n‚ùØ ip neigh show 172.20.10.2 dev eth0 lladdr ac:bc:32:9c:a6:3b REACHABLE 172.20.10.1 dev eth0 lladdr 72:70:0d:4c:6b:64 STALE IP Routing You can view the routing table with:\n‚ùØ ip route show default via 172.20.10.1 dev eth0 proto static metric 1024 172.20.10.0/28 dev eth0 proto kernel scope link src 172.20.10.10 Create a static route to router 192.168.1.1 through the eth1 interfaces, we would use the ip route command:\n‚ùØ ip route add default via 192.168.1.1 dev eth1 Virtual LANs (VLANs) Configures VLANs on a Linux system by setting up a bridge (br0) with VLAN filtering and adding interfaces to manage tagged and untagged traffic. The 8021q module is loaded to enable VLAN tagging, and the bridge br0 is created to handle VLAN assignments. eth1 is assigned to VLAN 11 and eth3 to VLAN 12, both set to handle untagged traffic. eth2 is made a member of both VLANs (11 and 12), allowing it to route tagged frames across them. Finally, all interfaces are activated, enabling VLAN-based traffic segmentation across the specified Ethernet ports.\n‚ùØ sudo modprobe 8021q ‚ùØ sudo ip link add br0 type bridge vlan_filtering 1 ‚ùØ sudo ip link set eth1 master br0 ‚ùØ sudo ip link set eth2 master br0 ‚ùØ sudo ip link set eth3 master br0 ‚ùØ sudo bridge vlan add dev eth1 vid 11 pvid untagged ‚ùØ sudo bridge vlan add dev eth3 vid 12 pvid untagged ‚ùØ sudo bridge vlan add dev eth2 vid 11 ‚ùØ sudo bridge vlan add dev eth2 vid 12 ‚ùØ sudo ip link set up dev br0 ‚ùØ sudo ip link set up dev eth1 ‚ùØ sudo ip link set up dev eth2 ‚ùØ sudo ip link set up dev eth3 Check the status of the bridge links\n‚ùØ bridge link show Check the status of the VLANs tranversing the bridge\n‚ùØ bridge vlan show View the forwarding database\n‚ùØ bridge fdb show This setup connects two Linux systems over a VXLAN (Virtual Extensible LAN) tunnel, creating a virtual Layer 2 network between them. On each system, a bridge (br0) is created with VLAN filtering, and a VLAN interface (vlan10) is added with an IP in the 10.0.0.x/24 subnet. A VXLAN Tunnel Endpoint (VTEP) interface (vtep10) is configured on each host, specifying the VXLAN ID (1010) and local and remote IP addresses, allowing encapsulated traffic to traverse between hosts transparently. The interface eth1 is added to the bridge, set to VLAN 10 with untagged traffic, enabling the two Linux systems to communicate as if on the same local network.\nLinux System 1\n‚ùØ sudo ip link add br0 type bridge vlan_filtering 1 ‚ùØ sudo ip link add vlan10 type vlan id 10 link bridge protocol none ‚ùØ sudo ip addr add 10.0.0.1/24 dev vlan10 ‚ùØ sudo ip link add vtep10 type vxlan id 1010 local 10.1.0.1 remote 10.3.0.1 learning ‚ùØ sudo ip link set eth1 master br0 ‚ùØ sudo bridge vlan add dev eth1 vid 10 pvid untagged Linux System 1\n‚ùØ ‚ùØ sudo ip link add br0 type bridge vlan_filtering 1 ‚ùØ sudo ip link add vlan10 type vlan id 10 link bridge protocol none ‚ùØ sudo ip addr add 10.0.0.2/24 dev vlan10 ‚ùØ sudo ip link add vtep10 type vxlan id 1010 local 10.3.0.1 remote 10.1.0.1 learning ‚ùØ sudo ip link set eth1 master br0 ‚ùØ sudo bridge vlan add dev eth1 vid 10 pvid untagged Chapter 5 Instead of trying to administer a Linux-powered network with hundreds of command and configuration files, Cumulus Linux includes a command line utility as part of the NCLU package that is invoked by the net command to provide a consistent and helpful user interface.\n‚ùØ net help . # # COMMANDS are listed below and have context specific arguments which can # be explored by typing \"\" or \"help\" anytime while using net. # # Use 'man net' for a more comprehensive overview. net abort net commit [verbose] [confirm] [description ] net commit delete (|) net commit permanent net del all net help [verbose] net pending [json] net rollback (|last) net rollback description net show commit (history|||last) net show rollback (|last) net show rollback description net show configuration Building better bridge One of the most basic networking use cases is a single transparent bridge. In our example, we‚Äôll put the interfaces named swp1, swp2, and swp3 into a transparent bridge with swp3 connecting back into our layer 2 bridge infrastructure.\n‚ùØ net add bridge bridge ports swp1,swp2,swp3 ‚ùØ net commit Two Links Are better than one This command sequence configures a Multi-Chassis Link Aggregation (MLAG) setup to ensure redundancy and high availability for server connections in a network. In this setup, two switches work together to appear as a single logical unit to connected servers, enabling redundancy at both link and switch levels. The command net add clag peer sys-mac designates a shared MAC address for MLAG communication, while swp5 and swp6 are configured as peer links, which are essential for the two switches to sync state information. VLANs 100-199 are added to trunk traffic between the switches and servers. The command net add clag port bond is used to create bonded connections to core network switches (bond-to-spines) and to servers (host-01 and host-02), with unique clag-id identifiers for each connection. Finally, net commit applies these configurations, ensuring resilient connectivity and load balancing across the network paths.\n‚ùØ ‚ùØ net add clag peer sys-mac 44:38:39:FF:00:01 interface swp5,swp6 primary ‚ùØ net add vlan 100-199 ‚ùØ net add clag port bond bond-to-spines interface swp3-4 clag-id 500 ‚ùØ net add clag port bond host-01 interface swp1 clag-id 1 ‚ùØ net add clag port bond host-02 interface swp1 clag-id 2 ‚ùØ net commit In this configuration, an IP fabric is created using a leaf-spine topology, ideal for modern data centers to handle high-speed, low-latency, layer 3 (IP routed) traffic flows. The leaf switch is set up to use BGP unnumbered on interfaces connected to spine switches (swp5-8), enabling automatic address assignments and streamlined connectivity without assigning specific IP addresses on each link. BGP advertisements are used to propagate reachability for the leaf‚Äôs IP subnets (10.0.0.0/24 and 10.1.0.1/32) across the network, ensuring efficient routing. Commands initialize BGP for Autonomous System (AS) 65001, add a loopback IP (for device identification), assign VLAN 1 with an IP address, and configure a bridge over ports swp1-4 for local connectivity. Finally, net commit applies these settings, creating a scalable, robust IP fabric with simplified configuration across the network infrastructure.\n‚ùØ net add bgp autonomous-system 65001 ‚ùØ net add loopback lo ip address 10.1.0.1/32 ‚ùØ net add bgp ipv4 unicast network 10.1.0.1/32 ‚ùØ net add vlan 1 ip address 10.0.0.1/24 ‚ùØ net add bgp ipv4 unicast network 10.0.0.1/24 ‚ùØ net add bgp neighbor swp5-8 interface remote-as external ‚ùØ net add bgp ipv4 unicast neighbor swp5-8 activate ‚ùØ net add bridge bridge ports swp1-4 ‚ùØ net commit In this setup, BGP EVPN (Ethernet Virtual Private Network) enables layer 2 peering across a layer 3 IP fabric, ideal for applications that need layer 2 connectivity, like VMware‚Äôs vMotion, within a highly scalable layer 3 network. Here, BGP EVPN advertises learned MAC addresses across the network, allowing each leaf switch to forward layer 2 traffic directly to the appropriate VTEP (Virtual Tunnel Endpoint) without relying on traditional flooding methods or spanning tree protocols. The configuration assigns Autonomous System (AS) 65001, sets up loopback and VLAN IP addresses, and establishes a tagged VLAN (VLAN 100) with a VTEP for layer 2 connectivity. Commands enable VLAN 100 across interfaces swp1-4 and configure BGP unnumbered on spine connections (swp5-8), facilitating routing and advertising reachability. With these settings, BGP EVPN broadcasts VLAN 100‚Äôs availability across the network, ensuring seamless layer 2 and layer 3 integration within the IP fabric.\n‚ùØ net add bgp autonomous-system 65001 ‚ùØ net add loopback lo ip address 10.1.0.1/32 ‚ùØ net add bgp ipv4 unicast network 10.1.0.1/32 ‚ùØ net add vlan 1 ip address 10.0.0.1/24 ‚ùØ net add bgp ipv4 unicast network 10.0.0.1/24 ‚ùØ net add interface swp1-4 bridge trunk vlans 100 Cumulus Linux 93 ‚ùØ net add vxlan vtep100 vxlan id 100 ‚ùØ net add vxlan vtep100 vxlan local-tunnelip 10.1.0.1 ‚ùØ net add vxlan vtep100 bridge access 100 ‚ùØ net add vxlan vtep100 bridge learning off ‚ùØ net add vxlan vtep100 mtu 9216 ‚ùØ net add bgp neighbor swp5-8 interface remote-as external ‚ùØ net add interface swp5-8 mtu 9216 ‚ùØ net add bgp neighbor swp5-8 interface remote-as external ‚ùØ net add bgp ipv4 unicast neighbor swp5-8 activate ‚ùØ net add bgp evpn neighbor swp5-8 activate ‚ùØ net add bgp evpn advertise-all-vni ‚ùØ net commit In chapters 1 through 5 of the Cumulus Networks book, the foundation for modern network architecture and best practices in data center networking is thoroughly established. The book begins with essential networking concepts and progressively introduces key topics such as layer 2 and layer 3 design principles, VLANs, MLAG (Multi-Chassis Link Aggregation) for redundancy, and the growing preference for IP-based fabrics over traditional broadcast domains. It then explores advanced network virtualization techniques with BGP EVPN, showing how BGP can facilitate both IP routing and layer 2 overlays, providing scalable and efficient connectivity. The focus on high-performance, resilient, and scalable networks‚Äîespecially suited for data centers‚Äîunderscores the shift towards simplified management and automation in networking. By the end of these chapters, readers are equipped with the core principles and practical configurations needed to design robust, flexible networks that can adapt to dynamic data center demands, from minimizing latency in leaf-spine architectures to using VXLAN and BGP for network virtualization.\n","wordCount":"3413","inLanguage":"en","datePublished":"2024-10-29T09:20:42-06:00","dateModified":"2024-10-29T09:20:42-06:00","author":[{"@type":"Person","name":"3rickDJ"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://erickdjm.xyz/posts/linux_networking/"},"publisher":{"@type":"Organization","name":"Erick's Code","logo":{"@type":"ImageObject","url":"https://erickdjm.xyz/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://erickdjm.xyz/ accesskey=h title="Erick's Code (Alt + H)">Erick's Code</a>üéÉ<div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://erickdjm.xyz/posts/ title=Blog><span>Blog</span></a></li><li><a href=https://erickdjm.xyz/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://erickdjm.xyz/>Home</a>&nbsp;¬ª&nbsp;<a href=https://erickdjm.xyz/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Linux networking</h1><div class=post-meta><span title='2024-10-29 09:20:42 -0600 -0600'>October 29, 2024</span>&nbsp;¬∑&nbsp;17 min&nbsp;¬∑&nbsp;3rickDJ&nbsp;|&nbsp;<a href=https://github.com/3rickDJ/SupaDupaBlog/tree/main/content//posts/linux_networking.md rel="noopener noreferrer" target=_blank>Sugerir Cambios</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#linux_networking aria-label=linux_networking>linux_networking</a><ul><li><a href=#chapter-2 aria-label="Chapter 2">Chapter 2</a><ul><li><a href=#executing-programs aria-label="Executing programs">Executing programs</a></li><li><a href=#installing-appplications aria-label="Installing appplications">Installing appplications</a></li><li><a href=#getting-help aria-label="Getting help">Getting help</a></li><li><a href=#linux-proceses aria-label="Linux proceses">Linux proceses</a></li><li><a href=#linux-log-files aria-label="Linux log files">Linux log files</a></li><li><a href=#users-and-super-users aria-label="Users and super users">Users and super users</a></li><li><a href=#files-and-permissions aria-label="Files and permissions">Files and permissions</a></li></ul></li><li><a href=#chapter-3 aria-label="Chapter 3">Chapter 3</a><ul><li><a href=#understanding-linux-network-interfaces aria-label="Understanding Linux Network Interfaces">Understanding Linux Network Interfaces</a></li><li><a href=#mac-addresses aria-label="MAC Addresses">MAC Addresses</a></li><li><a href=#ip-addressing aria-label="IP Addressing">IP Addressing</a></li><li><a href=#dhcp aria-label=DHCP>DHCP</a></li><li><a href=#dns aria-label=DNS>DNS</a></li></ul></li><li><a href=#chapter-4 aria-label="Chapter 4">Chapter 4</a><ul><li><a href=#bridging aria-label=Bridging>Bridging</a></li><li><a href=#neighbor-table aria-label="Neighbor Table">Neighbor Table</a></li><li><a href=#ip-routing aria-label="IP Routing">IP Routing</a></li><li><a href=#virtual-lans-vlans aria-label="Virtual LANs (VLANs)">Virtual LANs (VLANs)</a></li></ul></li><li><a href=#chapter-5 aria-label="Chapter 5">Chapter 5</a><ul><li><a href=#building-better-bridge aria-label="Building better bridge">Building better bridge</a></li><li><a href=#two-links-are-better-than-one aria-label="Two Links Are better than one">Two Links Are better than one</a></li></ul></li></ul></li></ul></div></details></div><div class=post-content><h1 id=linux_networking>linux_networking<a hidden class=anchor aria-hidden=true href=#linux_networking>#</a></h1><p>This is a recopilation of commands and its executiong based on the book <code>THE GORILLA GUIDE TO LINUX NETWORKING 101</code></p><h2 id=chapter-2>Chapter 2<a hidden class=anchor aria-hidden=true href=#chapter-2>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ ssh cumulus@192.168.1.107
</span></span><span style=display:flex><span>cumulus@192.168.1.107<span style=color:#e6db74>&#39;s password: ********
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Welcome to Cumulus VX (TM)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Cumulus VX (TM) is a community supported virtual 
</span></span></span><span style=display:flex><span><span style=color:#e6db74>appliance designed for experiencing, testing, and 
</span></span></span><span style=display:flex><span><span style=color:#e6db74>prototyping Cumulus Networks&#39;</span> latest technology.
</span></span><span style=display:flex><span>For any questions or technical support, visit our 
</span></span><span style=display:flex><span>community site at: http://community.cumulusnetworks.com
</span></span><span style=display:flex><span>The registered trademark Linux ¬Æ is used pursuant to a 
</span></span><span style=display:flex><span>sublicense from LMI, the exclusive licensee of 
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ uname -a
</span></span><span style=display:flex><span>Linux e-pc 5.15.0-124-generic <span style=color:#75715e>#134~20.04.1-Ubuntu SMP Tue Oct 1 15:27:33 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux</span>
</span></span></code></pre></div><p>Show the type of operating system</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ uname -a
</span></span><span style=display:flex><span>Linux e-pc 5.15.0-124-generic <span style=color:#75715e>#134~20.04.1-Ubuntu SMP Tue Oct 1 15:27:33 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux</span>
</span></span></code></pre></div><p>Show host info and other data</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ hostnamectl
</span></span><span style=display:flex><span>   Static hostname: e-pc
</span></span><span style=display:flex><span>         Icon name: computer-laptop
</span></span><span style=display:flex><span>           Chassis: laptop üíª
</span></span><span style=display:flex><span>        Machine ID: 34a383e3a4c9492584d9b5fee7932a04
</span></span><span style=display:flex><span>           Boot ID: be0e8ac233fa4734b7721b398d184026
</span></span><span style=display:flex><span>  Operating System: Ubuntu 20.04.6 LTS
</span></span><span style=display:flex><span>    OS Support End: -
</span></span><span style=display:flex><span>OS Support Expired: 54y 9month 4w
</span></span><span style=display:flex><span>            Kernel: Linux 5.15.0-124-generic
</span></span><span style=display:flex><span>      Architecture: x86-64
</span></span></code></pre></div><p>Print working directory</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ pwd
</span></span><span style=display:flex><span>/home/erick
</span></span></code></pre></div><p>List files that are present in the folder</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ ls
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;2022-12-19 15-36-29.mkv&#39;</span>  <span style=color:#e6db74>&#39;2023-03-06 14-03-44.mkv&#39;</span>  <span style=color:#e6db74>&#39;2023-03-23 14-05-14.mkv&#39;</span>  <span style=color:#e6db74>&#39;2024-04-15 14-35-45.mkv&#39;</span>   binaries_installs/             Downloads/              proyects/
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;2022-12-20 15-34-27.mkv&#39;</span>  <span style=color:#e6db74>&#39;2023-03-07 14-01-59.mkv&#39;</span>  <span style=color:#e6db74>&#39;2023-04-03 14-03-15.mkv&#39;</span>  <span style=color:#e6db74>&#39;2024-04-15 14-38-27.mkv&#39;</span>   blog/                          examenTecuan/           Public/
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;2023-01-02 18-39-41.mkv&#39;</span>  <span style=color:#e6db74>&#39;2023-03-07 16-01-11.mkv&#39;</span>  <span style=color:#e6db74>&#39;2023-04-19 17-37-25.mkv&#39;</span>  <span style=color:#e6db74>&#39;2024-04-15 14-39-07.mkv&#39;</span>   CLionProjects/                 ExpanDrive/             SmartBear/
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;2023-02-13 14-25-11.mkv&#39;</span>  <span style=color:#e6db74>&#39;2023-03-07 16-08-41.mkv&#39;</span>  <span style=color:#e6db74>&#39;2023-11-01 22-27-37.mkv&#39;</span>  <span style=color:#e6db74>&#39;2024-04-15 14-43-40.mp4&#39;</span>   code/                          Firefox_wallpaper.png   snap/
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;2023-02-14 14-23-23.mkv&#39;</span>  <span style=color:#e6db74>&#39;2023-03-07 16-10-51.mkv&#39;</span>  <span style=color:#e6db74>&#39;2023-11-07 09-52-49.mkv&#39;</span>  <span style=color:#e6db74>&#39;2024-04-15 14-44-26.mp4&#39;</span>   conf_vim.md                    geb_scrip.groovy        Templates/
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;2023-02-14 14-34-04.mkv&#39;</span>  <span style=color:#e6db74>&#39;2023-03-07 16-11-40.mkv&#39;</span>  <span style=color:#e6db74>&#39;2023-11-08 09-45-05.mkv&#39;</span>  <span style=color:#e6db74>&#39;2024-04-20 06-36-22.mp4&#39;</span>   cultivos.mp4                   IdeaProjects/           tmp/
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;2023-02-16 14-09-09.mkv&#39;</span>  <span style=color:#e6db74>&#39;2023-03-07 16-14-50.mkv&#39;</span>  <span style=color:#e6db74>&#39;2023-11-17 12-06-38.mkv&#39;</span>  <span style=color:#e6db74>&#39;2024-04-20 06-37-49.mp4&#39;</span>   cultivos.osp                   IdeaSnapshots/          uni/
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;2023-02-20 13-59-04.mkv&#39;</span>  <span style=color:#e6db74>&#39;2023-03-07 16-14-52.mkv&#39;</span>  <span style=color:#e6db74>&#39;2023-11-17 18-06-01.mkv&#39;</span>  <span style=color:#e6db74>&#39;2024-04-30 12-40-12.mp4&#39;</span>   cumple                         logs/                   Videos/
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;2023-02-27 14-00-50.mkv&#39;</span>  <span style=color:#e6db74>&#39;2023-03-07 16-15-57.mkv&#39;</span>  <span style=color:#e6db74>&#39;2023-11-21 13-55-35.mkv&#39;</span>  <span style=color:#e6db74>&#39;2024-05-08 10-56-58.mp4&#39;</span>   default-soapui-workspace.xml   Music/                 <span style=color:#e6db74>&#39;VirtualBox VMs&#39;</span>/
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;2023-02-28 14-02-55.mkv&#39;</span>  <span style=color:#e6db74>&#39;2023-03-13 14-03-40.mkv&#39;</span>  <span style=color:#e6db74>&#39;2024-04-15 14-33-51.mkv&#39;</span>  <span style=color:#e6db74>&#39;2024-06-03 17-33-55.mp4&#39;</span>   Desktop/                       NetBeansProjects/       vite_grep.log
</span></span><span style=display:flex><span><span style=color:#e6db74>&#39;2023-03-02 14-06-31.mkv&#39;</span>  <span style=color:#e6db74>&#39;2023-03-22 14-00-11.mkv&#39;</span>  <span style=color:#e6db74>&#39;2024-04-15 14-35-34.mkv&#39;</span>  <span style=color:#e6db74>&#39;2024-06-06 09-58-58.mp4&#39;</span>   Documents/                     Pictures/               zblockChain/
</span></span></code></pre></div><p>Change directory</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ cd /home/erick/.config/
</span></span></code></pre></div><p>Remove files</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ rm aFile
</span></span></code></pre></div><p>Make and remove folders</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ mkdir folder
</span></span><span style=display:flex><span>‚ùØ rmdir emptyFolder
</span></span></code></pre></div><h3 id=executing-programs>Executing programs<a hidden class=anchor aria-hidden=true href=#executing-programs>#</a></h3><p>Print path variable</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ echo $PATH
</span></span><span style=display:flex><span>/home/linuxbrew/.linuxbrew/bin /home/linuxbrew/.linuxbrew/sbin /home/erick/.asdf/shims /home/erick/.asdf/bin /home/erick/uni/webServices/pomm/apache-maven-3.9.9/bin /home/linuxbrew/.linuxbrew/opt/postgresql@11/bin /home/erick/.foundry/bin /home/erick/.sdkman/candidates/java/current/bin /home/erick/.sdkman/candidates/groovy/current/bin /home/erick/.sdkman/candidates/gradle/current/bin /home/erick/.cargo/bin /home/erick/.local/bin /usr/local/sbin /usr/local/bin /usr/sbin /usr/bin /sbin /bin /usr/games /usr/local/games /snap/bin
</span></span></code></pre></div><p>List installed packages</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ apt list --installed
</span></span><span style=display:flex><span>Listing...
</span></span><span style=display:flex><span>accountsservice/focal-updates,focal-security,now 0.6.55-0ubuntu12~20.04.7 amd64 <span style=color:#f92672>[</span>installed,automatic<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>acl/focal,now 2.2.53-6 amd64 <span style=color:#f92672>[</span>installed,automatic<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>acpi-support/focal,now 0.143 amd64 <span style=color:#f92672>[</span>installed<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>acpid/focal,now 1:2.0.32-1ubuntu1 amd64 <span style=color:#f92672>[</span>installed,automatic<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>adduser/focal,focal,now 3.118ubuntu2 all <span style=color:#f92672>[</span>installed,automatic<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>adwaita-icon-theme-full/focal-updates,focal-updates,now 3.36.1-2ubuntu0.20.04.2 all <span style=color:#f92672>[</span>installed,automatic<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>.
</span></span><span style=display:flex><span>.
</span></span><span style=display:flex><span>.
</span></span></code></pre></div><p>Pipin, direct the outpu of a command to another command</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ ls -al | less
</span></span></code></pre></div><h3 id=installing-appplications>Installing appplications<a hidden class=anchor aria-hidden=true href=#installing-appplications>#</a></h3><p>How do I install applications</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ sudo apt update
</span></span><span style=display:flex><span>‚ùØ sudo apt install package_to_install
</span></span></code></pre></div><p>Verify installation</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ apt show installed_package
</span></span></code></pre></div><h3 id=getting-help>Getting help<a hidden class=anchor aria-hidden=true href=#getting-help>#</a></h3><p>Getting help</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ man ls
</span></span><span style=display:flex><span>LS<span style=color:#f92672>(</span>1<span style=color:#f92672>)</span>                                                                                  User Commands                                                                                  LS<span style=color:#f92672>(</span>1<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NAME
</span></span><span style=display:flex><span>       ls - list directory contents
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>SYNOPSIS
</span></span><span style=display:flex><span>       ls <span style=color:#f92672>[</span>OPTION<span style=color:#f92672>]</span>... <span style=color:#f92672>[</span>FILE<span style=color:#f92672>]</span>...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>DESCRIPTION
</span></span><span style=display:flex><span>       List information about the FILEs <span style=color:#f92672>(</span>the current directory by default<span style=color:#f92672>)</span>.  Sort entries alphabetically <span style=color:#66d9ef>if</span> none of -cftuvSUX nor --sort is specified.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       Mandatory arguments to long options are mandatory <span style=color:#66d9ef>for</span> short options too.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>       -a, --all
</span></span><span style=display:flex><span>              <span style=color:#66d9ef>do</span> not ignore entries starting with .
</span></span></code></pre></div><h3 id=linux-proceses>Linux proceses<a hidden class=anchor aria-hidden=true href=#linux-proceses>#</a></h3><p>List running proceses</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ ps -ef
</span></span><span style=display:flex><span>UID          PID    PPID  C STIME TTY          TIME CMD
</span></span><span style=display:flex><span>root           <span style=color:#ae81ff>1</span>       <span style=color:#ae81ff>0</span>  <span style=color:#ae81ff>0</span> 18:19 ?        00:00:01 /sbin/init splash
</span></span><span style=display:flex><span>root           <span style=color:#ae81ff>2</span>       <span style=color:#ae81ff>0</span>  <span style=color:#ae81ff>0</span> 18:19 ?        00:00:00 <span style=color:#f92672>[</span>kthreadd<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>root           <span style=color:#ae81ff>3</span>       <span style=color:#ae81ff>2</span>  <span style=color:#ae81ff>0</span> 18:19 ?        00:00:00 <span style=color:#f92672>[</span>rcu_gp<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>root           <span style=color:#ae81ff>4</span>       <span style=color:#ae81ff>2</span>  <span style=color:#ae81ff>0</span> 18:19 ?        00:00:00 <span style=color:#f92672>[</span>rcu_par_gp<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>root           <span style=color:#ae81ff>5</span>       <span style=color:#ae81ff>2</span>  <span style=color:#ae81ff>0</span> 18:19 ?        00:00:00 <span style=color:#f92672>[</span>slub_flushwq<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>root           <span style=color:#ae81ff>6</span>       <span style=color:#ae81ff>2</span>  <span style=color:#ae81ff>0</span> 18:19 ?        00:00:00 <span style=color:#f92672>[</span>netns<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>root           <span style=color:#ae81ff>8</span>       <span style=color:#ae81ff>2</span>  <span style=color:#ae81ff>0</span> 18:19 ?        00:00:00 <span style=color:#f92672>[</span>kworker/0:0H-events_highpri<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>Start, stop, or check status of services.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ systemctl status rabbitmq-server
</span></span><span style=display:flex><span>‚óè rabbitmq-server.service - RabbitMQ broker
</span></span><span style=display:flex><span>     Loaded: loaded <span style=color:#f92672>(</span>8;;file://e-pc/lib/systemd/system/rabbitmq-server.service^G/lib/systemd/system/rabbitmq-server.service8;;^G; enabled; preset: enabled<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>     Active: active <span style=color:#f92672>(</span>running<span style=color:#f92672>)</span> since Wed 2024-10-30 00:20:05 UTC; 46min ago
</span></span><span style=display:flex><span>   Main PID: <span style=color:#ae81ff>1017</span> <span style=color:#f92672>(</span>beam.smp<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      Tasks: <span style=color:#ae81ff>39</span> <span style=color:#f92672>(</span>limit: 18697<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>     Memory: 164.5M
</span></span><span style=display:flex><span>     CGroup: /system.slice/rabbitmq-server.service
</span></span><span style=display:flex><span>             ‚îú‚îÄ1017 /usr/lib/erlang/erts-14.2.4/bin/beam.smp -W w -MBas ageffcbf -MHas ageffcbf -MBlmbcs <span style=color:#ae81ff>512</span> -MHlmbcs <span style=color:#ae81ff>512</span> -MMmcs <span style=color:#ae81ff>30</span> -pc unicode -P <span style=color:#ae81ff>1048576</span> -t <span style=color:#ae81ff>5000000</span> -stbt db -zdbbl <span style=color:#ae81ff>128000</span> -s&gt;
</span></span><span style=display:flex><span>             ‚îú‚îÄ1060 erl_child_setup <span style=color:#ae81ff>32768</span>
</span></span><span style=display:flex><span>             ‚îú‚îÄ1454 sh -s disksup
</span></span><span style=display:flex><span>             ‚îú‚îÄ1460 /usr/lib/erlang/lib/os_mon-2.9.1/priv/bin/memsup
</span></span><span style=display:flex><span>             ‚îú‚îÄ1461 /usr/lib/erlang/lib/os_mon-2.9.1/priv/bin/cpu_sup
</span></span><span style=display:flex><span>             ‚îú‚îÄ1496 /usr/lib/erlang/erts-14.2.4/bin/inet_gethost <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>             ‚îú‚îÄ1497 /usr/lib/erlang/erts-14.2.4/bin/inet_gethost <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>             ‚îî‚îÄ1509 /bin/sh -s rabbit_disk_monitor
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Oct <span style=color:#ae81ff>30</span> 00:20:03 e-pc rabbitmq-server<span style=color:#f92672>[</span>1017<span style=color:#f92672>]</span>:   Doc guides:  https://www.rabbitmq.com/docs
</span></span><span style=display:flex><span>Oct <span style=color:#ae81ff>30</span> 00:20:03 e-pc rabbitmq-server<span style=color:#f92672>[</span>1017<span style=color:#f92672>]</span>:   Support:     https://www.rabbitmq.com/docs/contact
</span></span><span style=display:flex><span>Oct <span style=color:#ae81ff>30</span> 00:20:03 e-pc rabbitmq-server<span style=color:#f92672>[</span>1017<span style=color:#f92672>]</span>:   Tutorials:   https://www.rabbitmq.com/tutorials
</span></span><span style=display:flex><span>.
</span></span><span style=display:flex><span>.
</span></span><span style=display:flex><span>.
</span></span></code></pre></div><h3 id=linux-log-files>Linux log files<a hidden class=anchor aria-hidden=true href=#linux-log-files>#</a></h3><p>View and parse log files
Show contents of a file</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ cat CNAME
</span></span><span style=display:flex><span>erickdjm.xyz
</span></span></code></pre></div><p>View a file with pagination and scrolling</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ less CNAME
</span></span></code></pre></div><p>Search for a string in a file</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ grep PATTERN <span style=color:#f92672>[</span>FILE<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>See the first lines (head end) of a text file</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ head
</span></span></code></pre></div><p>View the last lines (tail end ) of a text file. A common use case for tail is to wwatch the status of a log fie in real time with the &ldquo;f&rdquo; flag like:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ tail -f /var/log/syslog
</span></span></code></pre></div><h3 id=users-and-super-users>Users and super users<a hidden class=anchor aria-hidden=true href=#users-and-super-users>#</a></h3><p>User with id <code>1000</code>, and I am the user <code>erick</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ id
</span></span><span style=display:flex><span>uid<span style=color:#f92672>=</span>1000<span style=color:#f92672>(</span>erick<span style=color:#f92672>)</span> gid<span style=color:#f92672>=</span>1000<span style=color:#f92672>(</span>erick<span style=color:#f92672>)</span> groups<span style=color:#f92672>=</span>1000<span style=color:#f92672>(</span>erick<span style=color:#f92672>)</span>,4<span style=color:#f92672>(</span>adm<span style=color:#f92672>)</span>,24<span style=color:#f92672>(</span>cdrom<span style=color:#f92672>)</span>,27<span style=color:#f92672>(</span>sudo<span style=color:#f92672>)</span>,30<span style=color:#f92672>(</span>dip<span style=color:#f92672>)</span>,46<span style=color:#f92672>(</span>plugdev<span style=color:#f92672>)</span>,120<span style=color:#f92672>(</span>lpadmin<span style=color:#f92672>)</span>,132<span style=color:#f92672>(</span>lxd<span style=color:#f92672>)</span>,133<span style=color:#f92672>(</span>sambashare<span style=color:#f92672>)</span>,135<span style=color:#f92672>(</span>docker<span style=color:#f92672>)</span>,136<span style=color:#f92672>(</span>wireshark<span style=color:#f92672>)</span>,137<span style=color:#f92672>(</span>vboxusers<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>‚ùØ whoami
</span></span><span style=display:flex><span>erick
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>‚ùØ sudo id
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>sudo<span style=color:#f92672>]</span> password <span style=color:#66d9ef>for</span> erick:
</span></span><span style=display:flex><span>uid<span style=color:#f92672>=</span>0<span style=color:#f92672>(</span>root<span style=color:#f92672>)</span> gid<span style=color:#f92672>=</span>0<span style=color:#f92672>(</span>root<span style=color:#f92672>)</span> groups<span style=color:#f92672>=</span>0<span style=color:#f92672>(</span>root<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>‚ùØ sudo whoami
</span></span><span style=display:flex><span>root
</span></span></code></pre></div><h3 id=files-and-permissions>Files and permissions<a hidden class=anchor aria-hidden=true href=#files-and-permissions>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ ls -l
</span></span><span style=display:flex><span>total <span style=color:#ae81ff>36</span>
</span></span><span style=display:flex><span>drwxrwxr-x <span style=color:#ae81ff>2</span> erick erick <span style=color:#ae81ff>4096</span> oct <span style=color:#ae81ff>28</span> 19:20 archetypes/
</span></span><span style=display:flex><span>-rw-rw-r-- <span style=color:#ae81ff>1</span> erick erick   <span style=color:#ae81ff>13</span> oct <span style=color:#ae81ff>28</span> 19:20 CNAME
</span></span></code></pre></div><h2 id=chapter-3>Chapter 3<a hidden class=anchor aria-hidden=true href=#chapter-3>#</a></h2><h3 id=understanding-linux-network-interfaces>Understanding Linux Network Interfaces<a hidden class=anchor aria-hidden=true href=#understanding-linux-network-interfaces>#</a></h3><blockquote><p>Loopback. The loopback (lo) interface will have an IP address of 127.0.0.1, which represents the host itself</p></blockquote><blockquote><p>Ethernet. The ethernet 0 (eth0) interface is typically the
connection to the local network.</p></blockquote><p>Configure network interfaces/devices/links</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ ip link
</span></span><span style=display:flex><span>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span style=color:#ae81ff>65536</span> qdisc noqueue state UNKNOWN mode DEFAULT group default qlen <span style=color:#ae81ff>1000</span>
</span></span><span style=display:flex><span>    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
</span></span><span style=display:flex><span>2: wlp0s20f3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span style=color:#ae81ff>1500</span> qdisc noqueue state UP mode DORMANT group default qlen <span style=color:#ae81ff>1000</span>
</span></span><span style=display:flex><span>    link/ether c8:58:c0:c1:86:30 brd ff:ff:ff:ff:ff:ff
</span></span><span style=display:flex><span>3: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu <span style=color:#ae81ff>1500</span> qdisc noqueue state DOWN mode DEFAULT group default
</span></span><span style=display:flex><span>    link/ether 02:42:9d:02:3e:64 brd ff:ff:ff:ff:ff:ff
</span></span></code></pre></div><p><code>ip link set [dev] { up | down }</code>
<code>ip link set lo mtu 1500</code></p><h3 id=mac-addresses>MAC Addresses<a hidden class=anchor aria-hidden=true href=#mac-addresses>#</a></h3><p>Media access control address is the unique identifier assigned to a network interface at layer 2 &ndash; the Data Link Layer &ndash; of the OSI Model.</p><h3 id=ip-addressing>IP Addressing<a hidden class=anchor aria-hidden=true href=#ip-addressing>#</a></h3><p>They are unique on the same network, every device has at least one, adn addresses typically fall somewhere between 1.1.1.1 and 255.255.255.255</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ ip addr
</span></span><span style=display:flex><span>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span style=color:#ae81ff>65536</span> qdisc noqueue state UNKNOWN group default qlen <span style=color:#ae81ff>1000</span>
</span></span><span style=display:flex><span>    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
</span></span><span style=display:flex><span>    inet 127.0.0.1/8 scope host lo
</span></span><span style=display:flex><span>       valid_lft forever preferred_lft forever
</span></span><span style=display:flex><span>    inet6 ::1/128 scope host
</span></span><span style=display:flex><span>       valid_lft forever preferred_lft forever
</span></span><span style=display:flex><span>2: wlp0s20f3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span style=color:#ae81ff>1500</span> qdisc noqueue state UP group default qlen <span style=color:#ae81ff>1000</span>
</span></span><span style=display:flex><span>    link/ether c8:58:c0:c1:86:30 brd ff:ff:ff:ff:ff:ff
</span></span><span style=display:flex><span>    inet 192.168.1.101/24 brd 192.168.1.255 scope global dynamic noprefixroute wlp0s20f3
</span></span><span style=display:flex><span>       valid_lft 81572sec preferred_lft 81572sec
</span></span><span style=display:flex><span>    inet6 2806:10a6:13:511b:e122:aa52:72c7:9797/64 scope global temporary dynamic
</span></span><span style=display:flex><span>       valid_lft 599973sec preferred_lft 81052sec
</span></span><span style=display:flex><span>    inet6 2806:10a6:13:511b:549a:f3d5:b811:cde1/64 scope global dynamic mngtmpaddr noprefixroute
</span></span><span style=display:flex><span>       valid_lft 2591975sec preferred_lft 2591975sec
</span></span><span style=display:flex><span>    inet6 fe80::3713:2ee:2680:726d/64 scope link noprefixroute
</span></span><span style=display:flex><span>       valid_lft forever preferred_lft forever
</span></span><span style=display:flex><span>3: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu <span style=color:#ae81ff>1500</span> qdisc noqueue state DOWN group default
</span></span><span style=display:flex><span>    link/ether 02:42:9d:02:3e:64 brd ff:ff:ff:ff:ff:ff
</span></span><span style=display:flex><span>    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0
</span></span><span style=display:flex><span>       valid_lft forever preferred_lft forever
</span></span></code></pre></div><p>Sends out an Internet Control Message Protocol packet across the network and notifies whether the irs a response. If a host is up and able to communicate on the network an ICMP response will be returned.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ ping -c5 192.168.192.196
</span></span><span style=display:flex><span>PING 192.168.192.196 <span style=color:#f92672>(</span>192.168.192.196<span style=color:#f92672>)</span> 56<span style=color:#f92672>(</span>84<span style=color:#f92672>)</span> bytes of data.
</span></span></code></pre></div><p>Another common Linux network troubleshooting toolis <code>traceroute</code>. Probes the network between the local system and a destination, gathering information about each IP router in the path. Is useful when you think there may be a network issue.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ traceroute erickdjm.xyz
</span></span><span style=display:flex><span>traceroute to erickdjm.xyz <span style=color:#f92672>(</span>185.199.108.153<span style=color:#f92672>)</span>, <span style=color:#ae81ff>30</span> hops max, <span style=color:#ae81ff>60</span> byte packets
</span></span><span style=display:flex><span> <span style=color:#ae81ff>1</span>  _gateway <span style=color:#f92672>(</span>192.168.1.254<span style=color:#f92672>)</span>  5.209 ms  5.144 ms  5.117 ms
</span></span><span style=display:flex><span> <span style=color:#ae81ff>2</span>  dsl-servicio-l200.uninet.net.mx <span style=color:#f92672>(</span>200.38.193.226<span style=color:#f92672>)</span>  5.552 ms  5.526 ms  5.508 ms
</span></span><span style=display:flex><span> <span style=color:#ae81ff>3</span>  172.16.1.1 <span style=color:#f92672>(</span>172.16.1.1<span style=color:#f92672>)</span>  5.487 ms * *
</span></span><span style=display:flex><span> <span style=color:#ae81ff>4</span>  bb-la-grand-12-ae44_0.uninet.net.mx <span style=color:#f92672>(</span>189.246.23.17<span style=color:#f92672>)</span>  45.113 ms  45.096 ms  45.080 ms
</span></span></code></pre></div><h3 id=dhcp>DHCP<a hidden class=anchor aria-hidden=true href=#dhcp>#</a></h3><p><em>Dynamic host configuration protocol</em> is commonly used for client systems or devices that don&rsquo;t experience any side effects from a periodically changing IP address. On server systems, administrators either manually configure static IP addresses, or they create what are know as static DHCP reservations that are tied to the MAC address of the network adapter.</p><p>Here&rsquo;s how the typical DHCP process works:</p><ol><li>When a computer starts up, it sends a DHCP request out on
the network.</li><li>Assuming a DHCP server is present, a DHCP server responds
with the IP address configuration for that device.</li><li>That IP address is marked as reserved so that it‚Äôs not
accidentally assigned to some other device.</li></ol><h3 id=dns>DNS<a hidden class=anchor aria-hidden=true href=#dns>#</a></h3><p>Computers that connect to each other using TCP/IP talk with each other using IP addresses. <em>Domain name system</em> (DNS) is used to map IP addresses to names.</p><p>Perfomrs verbose DNS lookups and is great for toubleshooting DNS issues.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ dig erickdjm.xyz
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>; &lt;&lt;&gt;&gt; DiG 9.18.28-0ubuntu0.20.04.1-Ubuntu &lt;&lt;&gt;&gt; erickdjm.xyz
</span></span><span style=display:flex><span>;; global options: +cmd
</span></span><span style=display:flex><span>;; Got answer:
</span></span><span style=display:flex><span>;; -&gt;&gt;HEADER<span style=color:#e6db74>&lt;&lt;- opco</span>de: QUERY, status: NOERROR, id: <span style=color:#ae81ff>43318</span>
</span></span><span style=display:flex><span>;; flags: qr rd ra; QUERY: 1, ANSWER: 4, AUTHORITY: 0, ADDITIONAL: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>;; OPT PSEUDOSECTION:
</span></span><span style=display:flex><span>; EDNS: version: 0, flags:; udp: <span style=color:#ae81ff>65494</span>
</span></span><span style=display:flex><span>;; QUESTION SECTION:
</span></span><span style=display:flex><span>;erickdjm.xyz.                  IN      A
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>;; ANSWER SECTION:
</span></span><span style=display:flex><span>erickdjm.xyz.           <span style=color:#ae81ff>1799</span>    IN      A       185.199.111.153
</span></span><span style=display:flex><span>erickdjm.xyz.           <span style=color:#ae81ff>1799</span>    IN      A       185.199.110.153
</span></span><span style=display:flex><span>erickdjm.xyz.           <span style=color:#ae81ff>1799</span>    IN      A       185.199.109.153
</span></span><span style=display:flex><span>erickdjm.xyz.           <span style=color:#ae81ff>1799</span>    IN      A       185.199.108.153
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>;; Query time: <span style=color:#ae81ff>35</span> msec
</span></span><span style=display:flex><span>;; SERVER: 127.0.0.53#53<span style=color:#f92672>(</span>127.0.0.53<span style=color:#f92672>)</span> <span style=color:#f92672>(</span>UDP<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>;; WHEN: Tue Oct <span style=color:#ae81ff>29</span> 20:14:05 CST <span style=color:#ae81ff>2024</span>
</span></span><span style=display:flex><span>;; MSG SIZE  rcvd: <span style=color:#ae81ff>105</span>
</span></span></code></pre></div><p>Enumeraates name service switch files, specifically for host entries.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ getent ahosts
</span></span><span style=display:flex><span>127.0.0.1       localhost
</span></span><span style=display:flex><span>127.0.1.1       e-pc
</span></span><span style=display:flex><span>127.0.0.1       ip6-localhost ip6-loopback
</span></span><span style=display:flex><span>127.0.0.1       kubernetes.docker.internal
</span></span></code></pre></div><p>The name server lookup, or nslookup, performs variety of different DNS server lookups: mail server, reverse lookups.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ nslookup
</span></span><span style=display:flex><span>&gt; erickdjm.xyz
</span></span><span style=display:flex><span>Server:         127.0.0.53
</span></span><span style=display:flex><span>Address:        127.0.0.53#53
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Non-authoritative answer:
</span></span><span style=display:flex><span>Name:   erickdjm.xyz
</span></span><span style=display:flex><span>Address: 185.199.109.153
</span></span><span style=display:flex><span>Name:   erickdjm.xyz
</span></span><span style=display:flex><span>Address: 185.199.110.153
</span></span><span style=display:flex><span>Name:   erickdjm.xyz
</span></span><span style=display:flex><span>Address: 185.199.108.153
</span></span><span style=display:flex><span>Name:   erickdjm.xyz
</span></span><span style=display:flex><span>Address: 185.199.111.153
</span></span></code></pre></div><p>Show what active processes are that have the network interface open.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ netstat
</span></span><span style=display:flex><span>Active Internet connections <span style=color:#f92672>(</span>w/o servers<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Proto Recv-Q Send-Q Local Address           Foreign Address         State
</span></span><span style=display:flex><span>tcp        <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span> localhost:xtel          localhost:40626         ESTABLISHED
</span></span><span style=display:flex><span>tcp        <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span> localhost:xtel          localhost:34374         ESTABLISHED
</span></span><span style=display:flex><span>tcp        <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span> localhost:40642         localhost:xtel          ESTABLISHED
</span></span><span style=display:flex><span>tcp        <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span> e-pc:51974              13.89.179.13:https      ESTABLISHED
</span></span><span style=display:flex><span>tcp        <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span> localhost:34374         localhost:xtel          ESTABLISHED
</span></span><span style=display:flex><span>tcp        <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span> localhost:40288         localhost:epmd          ESTABLISHED
</span></span><span style=display:flex><span>tcp        <span style=color:#ae81ff>0</span>      <span style=color:#ae81ff>0</span> e-pc:41384              static.73.91.90.1:https ESTABLISHED
</span></span></code></pre></div><h2 id=chapter-4>Chapter 4<a hidden class=anchor aria-hidden=true href=#chapter-4>#</a></h2><h3 id=bridging>Bridging<a hidden class=anchor aria-hidden=true href=#bridging>#</a></h3><p>First we are creating a brife named br0
The two ip link set commands add the two Ethernet onterfaces, eth0 and eth1, to the new bridge resulting in a connection between these two interfaces.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ sudo ip link add br0 type bridge
</span></span><span style=display:flex><span>‚ùØ sudo ip link add eth0 master br0
</span></span><span style=display:flex><span>‚ùØ sudo ip link add eth1 master br0
</span></span></code></pre></div><p>Show current forwarding database management.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ sudo bridge fdb show
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>sudo<span style=color:#f92672>]</span> password <span style=color:#66d9ef>for</span> david:
</span></span><span style=display:flex><span>01:00:5e:00:00:01 dev eth0 self permanent
</span></span><span style=display:flex><span>33:33:00:00:00:01 dev eth0 self permanent
</span></span><span style=display:flex><span>33:33:ff:d0:e8:7e dev eth0 self permanent
</span></span><span style=display:flex><span>01:00:5e:00:00:fb dev eth0 self permanent
</span></span><span style=display:flex><span>33:33:00:00:00:fb dev eth0 self permanen 
</span></span></code></pre></div><h3 id=neighbor-table>Neighbor Table<a hidden class=anchor aria-hidden=true href=#neighbor-table>#</a></h3><p>When an IP node wants to communicate with a system in the same layer 2 domain, it looks in its neighbor table, or ARP table, to determine how to construct the Ethernet frame. If the desired destination IP address is not in the neighbor table, the node issues an ARP request, which is broadcast to everyone in the layer 2 domain, that asks, ‚ÄúPlease tell me the MAC address for the node with IP address X.X.X.X.‚Äù Assuming the target device is available, the node with that IP address will respond. In Linux, you view (and manipulate) the Neighbor table using the ip neighbor show</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ ip neigh show
</span></span><span style=display:flex><span>172.20.10.2 dev eth0 lladdr ac:bc:32:9c:a6:3b REACHABLE
</span></span><span style=display:flex><span>172.20.10.1 dev eth0 lladdr 72:70:0d:4c:6b:64 STALE
</span></span></code></pre></div><h3 id=ip-routing>IP Routing<a hidden class=anchor aria-hidden=true href=#ip-routing>#</a></h3><p>You can view the routing table with:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ ip route show
</span></span><span style=display:flex><span>default via 172.20.10.1 dev eth0 proto static metric 
</span></span><span style=display:flex><span><span style=color:#ae81ff>1024</span>
</span></span><span style=display:flex><span>172.20.10.0/28 dev eth0 proto kernel scope link src 
</span></span><span style=display:flex><span>172.20.10.10
</span></span></code></pre></div><p>Create a static route to router 192.168.1.1 through the eth1 interfaces, we would use the <strong>ip route</strong> command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ ip route add default via 192.168.1.1 dev eth1
</span></span></code></pre></div><h3 id=virtual-lans-vlans>Virtual LANs (VLANs)<a hidden class=anchor aria-hidden=true href=#virtual-lans-vlans>#</a></h3><p>Configures VLANs on a Linux system by setting up a bridge (br0) with VLAN filtering and adding interfaces to manage tagged and untagged traffic. The 8021q module is loaded to enable VLAN tagging, and the bridge br0 is created to handle VLAN assignments. eth1 is assigned to VLAN 11 and eth3 to VLAN 12, both set to handle untagged traffic. eth2 is made a member of both VLANs (11 and 12), allowing it to route tagged frames across them. Finally, all interfaces are activated, enabling VLAN-based traffic segmentation across the specified Ethernet ports.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ sudo modprobe 8021q
</span></span><span style=display:flex><span>‚ùØ sudo ip link add br0 type bridge vlan_filtering <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>‚ùØ sudo ip link set eth1 master br0
</span></span><span style=display:flex><span>‚ùØ sudo ip link set eth2 master br0
</span></span><span style=display:flex><span>‚ùØ sudo ip link set eth3 master br0
</span></span><span style=display:flex><span>‚ùØ sudo bridge vlan add dev eth1 vid <span style=color:#ae81ff>11</span> pvid untagged 
</span></span><span style=display:flex><span>‚ùØ sudo bridge vlan add dev eth3 vid <span style=color:#ae81ff>12</span> pvid untagged 
</span></span><span style=display:flex><span>‚ùØ sudo bridge vlan add dev eth2 vid <span style=color:#ae81ff>11</span>
</span></span><span style=display:flex><span>‚ùØ sudo bridge vlan add dev eth2 vid <span style=color:#ae81ff>12</span> 
</span></span><span style=display:flex><span>‚ùØ sudo ip link set up dev br0
</span></span><span style=display:flex><span>‚ùØ sudo ip link set up dev eth1
</span></span><span style=display:flex><span>‚ùØ sudo ip link set up dev eth2
</span></span><span style=display:flex><span>‚ùØ sudo ip link set up dev eth3
</span></span></code></pre></div><p>Check the status of the bridge links</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ bridge link show 
</span></span></code></pre></div><p>Check the status of the VLANs tranversing the bridge</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ bridge vlan show
</span></span></code></pre></div><p>View the forwarding database</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ bridge fdb show
</span></span></code></pre></div><p>This setup connects two Linux systems over a VXLAN (Virtual Extensible LAN) tunnel, creating a virtual Layer 2 network between them. On each system, a bridge (br0) is created with VLAN filtering, and a VLAN interface (vlan10) is added with an IP in the 10.0.0.x/24 subnet. A VXLAN Tunnel Endpoint (VTEP) interface (vtep10) is configured on each host, specifying the VXLAN ID (1010) and local and remote IP addresses, allowing encapsulated traffic to traverse between hosts transparently. The interface eth1 is added to the bridge, set to VLAN 10 with untagged traffic, enabling the two Linux systems to communicate as if on the same local network.</p><blockquote><p>Linux System 1</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ sudo ip link add br0 type bridge vlan_filtering <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>‚ùØ sudo ip link add vlan10 type vlan id <span style=color:#ae81ff>10</span> link bridge 
</span></span><span style=display:flex><span>protocol none
</span></span><span style=display:flex><span>‚ùØ sudo ip addr add 10.0.0.1/24 dev vlan10
</span></span><span style=display:flex><span>‚ùØ sudo ip link add vtep10 type vxlan id <span style=color:#ae81ff>1010</span> local 
</span></span><span style=display:flex><span>10.1.0.1 remote 10.3.0.1 learning
</span></span><span style=display:flex><span>‚ùØ sudo ip link set eth1 master br0
</span></span><span style=display:flex><span>‚ùØ sudo bridge vlan add dev eth1 vid <span style=color:#ae81ff>10</span> pvid untagged 
</span></span></code></pre></div><blockquote><p>Linux System 1</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ 
</span></span><span style=display:flex><span>‚ùØ sudo ip link add br0 type bridge vlan_filtering <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>‚ùØ sudo ip link add vlan10 type vlan id <span style=color:#ae81ff>10</span> link bridge 
</span></span><span style=display:flex><span>protocol none
</span></span><span style=display:flex><span>‚ùØ sudo ip addr add 10.0.0.2/24 dev vlan10
</span></span><span style=display:flex><span>‚ùØ sudo ip link add vtep10 type vxlan id <span style=color:#ae81ff>1010</span> local 
</span></span><span style=display:flex><span>10.3.0.1 remote 10.1.0.1 learning
</span></span><span style=display:flex><span>‚ùØ sudo ip link set eth1 master br0
</span></span><span style=display:flex><span>‚ùØ sudo bridge vlan add dev eth1 vid <span style=color:#ae81ff>10</span> pvid untagged
</span></span></code></pre></div><h2 id=chapter-5>Chapter 5<a hidden class=anchor aria-hidden=true href=#chapter-5>#</a></h2><p>Instead of trying to administer a Linux-powered network with hundreds
of command and configuration files, Cumulus Linux includes a
command line utility as part of the NCLU package that is invoked by
the net command to provide a consistent and helpful user interface.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ net help
</span></span><span style=display:flex><span>.
</span></span><span style=display:flex><span> <span style=color:#75715e>#</span>
</span></span><span style=display:flex><span> <span style=color:#75715e># COMMANDS are listed below and have context </span>
</span></span><span style=display:flex><span>specific arguments which can
</span></span><span style=display:flex><span> <span style=color:#75715e># be explored by typing &#34;&lt;TAB&gt;&#34; or &#34;help&#34; anytime </span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> using net.
</span></span><span style=display:flex><span> <span style=color:#75715e>#</span>
</span></span><span style=display:flex><span> <span style=color:#75715e># Use &#39;man net&#39; for a more comprehensive overview.</span>
</span></span><span style=display:flex><span> net abort
</span></span><span style=display:flex><span> net commit <span style=color:#f92672>[</span>verbose<span style=color:#f92672>]</span> <span style=color:#f92672>[</span>confirm<span style=color:#f92672>]</span> <span style=color:#f92672>[</span>description 
</span></span><span style=display:flex><span>&lt;wildcard&gt;<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span> net commit delete <span style=color:#f92672>(</span>&lt;number&gt;|&lt;number-range&gt;<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span> net commit permanent &lt;wildcard&gt;
</span></span><span style=display:flex><span> net del all
</span></span><span style=display:flex><span> net help <span style=color:#f92672>[</span>verbose<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span> net pending <span style=color:#f92672>[</span>json<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span> net rollback <span style=color:#f92672>(</span>&lt;number&gt;|last<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span> net rollback description &lt;wildcard-snapshot&gt;
</span></span><span style=display:flex><span> net show commit <span style=color:#f92672>(</span>history|&lt;number&gt;|&lt;numberrange&gt;|last<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span> net show rollback <span style=color:#f92672>(</span>&lt;number&gt;|last<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span> net show rollback description &lt;wildcard-snapshot&gt;
</span></span><span style=display:flex><span> net show configuration 
</span></span></code></pre></div><h3 id=building-better-bridge>Building better bridge<a hidden class=anchor aria-hidden=true href=#building-better-bridge>#</a></h3><p>One of the most basic networking use cases is a single transparent bridge. In our example, we‚Äôll put the interfaces named swp1, swp2, and swp3 into a transparent bridge with swp3 connecting back into our layer 2 bridge infrastructure.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ net add bridge bridge ports swp1,swp2,swp3
</span></span><span style=display:flex><span>‚ùØ net commit
</span></span></code></pre></div><h3 id=two-links-are-better-than-one>Two Links Are better than one<a hidden class=anchor aria-hidden=true href=#two-links-are-better-than-one>#</a></h3><p>This command sequence configures a Multi-Chassis Link Aggregation (MLAG) setup to ensure redundancy and high availability for server connections in a network. In this setup, two switches work together to appear as a single logical unit to connected servers, enabling redundancy at both link and switch levels. The command net add clag peer sys-mac designates a shared MAC address for MLAG communication, while swp5 and swp6 are configured as peer links, which are essential for the two switches to sync state information. VLANs 100-199 are added to trunk traffic between the switches and servers. The command net add clag port bond is used to create bonded connections to core network switches (bond-to-spines) and to servers (host-01 and host-02), with unique clag-id identifiers for each connection. Finally, net commit applies these configurations, ensuring resilient connectivity and load balancing across the network paths.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ
</span></span><span style=display:flex><span>‚ùØ net add clag peer sys-mac 44:38:39:FF:00:01 interface 
</span></span><span style=display:flex><span>swp5,swp6 primary
</span></span><span style=display:flex><span>‚ùØ net add vlan 100-199
</span></span><span style=display:flex><span>‚ùØ net add clag port bond bond-to-spines interface swp3-4 
</span></span><span style=display:flex><span>clag-id <span style=color:#ae81ff>500</span>
</span></span><span style=display:flex><span>‚ùØ net add clag port bond host-01 interface swp1 clag-id 
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>‚ùØ net add clag port bond host-02 interface swp1 clag-id 
</span></span><span style=display:flex><span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>‚ùØ net commit
</span></span></code></pre></div><p>In this configuration, an IP fabric is created using a leaf-spine topology, ideal for modern data centers to handle high-speed, low-latency, layer 3 (IP routed) traffic flows. The leaf switch is set up to use BGP unnumbered on interfaces connected to spine switches (swp5-8), enabling automatic address assignments and streamlined connectivity without assigning specific IP addresses on each link. BGP advertisements are used to propagate reachability for the leaf‚Äôs IP subnets (10.0.0.0/24 and 10.1.0.1/32) across the network, ensuring efficient routing. Commands initialize BGP for Autonomous System (AS) 65001, add a loopback IP (for device identification), assign VLAN 1 with an IP address, and configure a bridge over ports swp1-4 for local connectivity. Finally, net commit applies these settings, creating a scalable, robust IP fabric with simplified configuration across the network infrastructure.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ net add bgp autonomous-system <span style=color:#ae81ff>65001</span>
</span></span><span style=display:flex><span>‚ùØ net add loopback lo ip address 10.1.0.1/32
</span></span><span style=display:flex><span>‚ùØ net add bgp ipv4 unicast network 10.1.0.1/32
</span></span><span style=display:flex><span>‚ùØ net add vlan <span style=color:#ae81ff>1</span> ip address 10.0.0.1/24
</span></span><span style=display:flex><span>‚ùØ net add bgp ipv4 unicast network 10.0.0.1/24
</span></span><span style=display:flex><span>‚ùØ net add bgp neighbor swp5-8 interface remote-as 
</span></span><span style=display:flex><span>external
</span></span><span style=display:flex><span>‚ùØ net add bgp ipv4 unicast neighbor swp5-8 activate
</span></span><span style=display:flex><span>‚ùØ net add bridge bridge ports swp1-4
</span></span><span style=display:flex><span>‚ùØ net commit 
</span></span></code></pre></div><p>In this setup, BGP EVPN (Ethernet Virtual Private Network) enables layer 2 peering across a layer 3 IP fabric, ideal for applications that need layer 2 connectivity, like VMware&rsquo;s vMotion, within a highly scalable layer 3 network. Here, BGP EVPN advertises learned MAC addresses across the network, allowing each leaf switch to forward layer 2 traffic directly to the appropriate VTEP (Virtual Tunnel Endpoint) without relying on traditional flooding methods or spanning tree protocols. The configuration assigns Autonomous System (AS) 65001, sets up loopback and VLAN IP addresses, and establishes a tagged VLAN (VLAN 100) with a VTEP for layer 2 connectivity. Commands enable VLAN 100 across interfaces swp1-4 and configure BGP unnumbered on spine connections (swp5-8), facilitating routing and advertising reachability. With these settings, BGP EVPN broadcasts VLAN 100&rsquo;s availability across the network, ensuring seamless layer 2 and layer 3 integration within the IP fabric.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>‚ùØ net add bgp autonomous-system <span style=color:#ae81ff>65001</span>
</span></span><span style=display:flex><span>‚ùØ net add loopback lo ip address 10.1.0.1/32
</span></span><span style=display:flex><span>‚ùØ net add bgp ipv4 unicast network 10.1.0.1/32
</span></span><span style=display:flex><span>‚ùØ net add vlan <span style=color:#ae81ff>1</span> ip address 10.0.0.1/24
</span></span><span style=display:flex><span>‚ùØ net add bgp ipv4 unicast network 10.0.0.1/24
</span></span><span style=display:flex><span>‚ùØ net add interface swp1-4 bridge trunk vlans <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>Cumulus Linux <span style=color:#ae81ff>93</span> 
</span></span><span style=display:flex><span>‚ùØ net add vxlan vtep100 vxlan id <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>‚ùØ net add vxlan vtep100 vxlan local-tunnelip 10.1.0.1
</span></span><span style=display:flex><span>‚ùØ net add vxlan vtep100 bridge access <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>‚ùØ net add vxlan vtep100 bridge learning off
</span></span><span style=display:flex><span>‚ùØ net add vxlan vtep100 mtu <span style=color:#ae81ff>9216</span>
</span></span><span style=display:flex><span>‚ùØ net add bgp neighbor swp5-8 interface remote-as
</span></span><span style=display:flex><span>external
</span></span><span style=display:flex><span>‚ùØ net add interface swp5-8 mtu <span style=color:#ae81ff>9216</span>
</span></span><span style=display:flex><span>‚ùØ net add bgp neighbor swp5-8 interface remote-as 
</span></span><span style=display:flex><span>external
</span></span><span style=display:flex><span>‚ùØ net add bgp ipv4 unicast neighbor swp5-8 activate
</span></span><span style=display:flex><span>‚ùØ net add bgp evpn neighbor swp5-8 activate
</span></span><span style=display:flex><span>‚ùØ net add bgp evpn advertise-all-vni
</span></span><span style=display:flex><span>‚ùØ net commit 
</span></span></code></pre></div><p>In chapters 1 through 5 of the Cumulus Networks book, the foundation for modern network architecture and best practices in data center networking is thoroughly established. The book begins with essential networking concepts and progressively introduces key topics such as layer 2 and layer 3 design principles, VLANs, MLAG (Multi-Chassis Link Aggregation) for redundancy, and the growing preference for IP-based fabrics over traditional broadcast domains. It then explores advanced network virtualization techniques with BGP EVPN, showing how BGP can facilitate both IP routing and layer 2 overlays, providing scalable and efficient connectivity. The focus on high-performance, resilient, and scalable networks‚Äîespecially suited for data centers‚Äîunderscores the shift towards simplified management and automation in networking. By the end of these chapters, readers are equipped with the core principles and practical configurations needed to design robust, flexible networks that can adapt to dynamic data center demands, from minimizing latency in leaf-spine architectures to using VXLAN and BGP for network virtualization.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=next href=https://erickdjm.xyz/posts/devjourney/><span class=title>Next ¬ª</span><br><span>DevJourney</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Linux networking on x" href="https://x.com/intent/tweet/?text=Linux%20networking&amp;url=https%3a%2f%2ferickdjm.xyz%2fposts%2flinux_networking%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Linux networking on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2ferickdjm.xyz%2fposts%2flinux_networking%2f&amp;title=Linux%20networking&amp;summary=Linux%20networking&amp;source=https%3a%2f%2ferickdjm.xyz%2fposts%2flinux_networking%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Linux networking on whatsapp" href="https://api.whatsapp.com/send?text=Linux%20networking%20-%20https%3a%2f%2ferickdjm.xyz%2fposts%2flinux_networking%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li></ul></footer><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//supadupa-blog.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class=footer><span><a href=https://erickdjm.xyz/>Erick's Code</a><a href=https://www.makingdevs.com/>üêá</a> Rights Reserved &copy; 2024</span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>